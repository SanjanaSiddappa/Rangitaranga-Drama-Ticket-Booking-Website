{% extends 'base.html' %}

{% block content %}
<style>
  body, html {
    height: 100%;
    margin: 0;
    padding: 0;
    background: url('{{ url_for('static', filename='images/background3.jpg') }}') no-repeat center center fixed;
    background-size: cover;
    color: white;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  }
  .show-heading {
    font-size: 3rem;
    margin-bottom: 20px;
    color: rgb(202, 75, 75);
    text-shadow: 2px 2px 5px rgb(22, 23, 99);
    font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;
    font-style: italic;
    font-weight: bold;
    animation: fadeIn 2s ease-in-out forwards;
  }
 
</style>

<div class="show-heading">Come, Live the Story</div>
<form method="POST" action="/shows" class="mb-4 d-flex flex-wrap align-items-center gap-3">
  <label for="date" class="form-label mb-0 fw-bold" style="font-size: 25px; color: #ffcc00;">Select Date:</label>
  <input type="date" id="date" name="date"
         class="form-control"
         style="max-width: 200px;"
         value="{{ date }}"
         min="{{ min_date }}"
         max="{{ max_date }}">
  <button type="submit" class="btn btn-primary" style="background-color:#ffcc00; color: rgb(192, 44, 25); font-size: 20px;"><strong>Find Shows</strong></button>
</form>

<h4 class="mb-4" style="font-size: 35px; color: #8a3dd6;">Available Shows for 
  <strong><span style="color: #ffffff; font-style: italic; background-color: #c71b7a;">{{date}}</span></strong>
</h4>

<div class="container-fluid">
  <div class="row">

      <!-- Shows Grid -->
      <div class="row">
        {% for show in shows %}
          <div class="col-md-6 col-lg-3 mb-4">
            <div class="card h-100 shadow-sm">
              <img src="{{ show.image }}" class="card-img-top" alt="{{ show.name }}" style="height:200px; object-fit:cover;">
              <div class="card-body">
                <h5 class="card-title">{{ show.name }}</h5>
                  <p class="card-text text-muted mb-1"> 
                    <i class="bi bi-geo-alt"></i>
                    {{ show.venue }}
                    <a href="{{ show.location_link }}" target="_blank" class="ms-2" style="text-decoration: none;">ðŸ“Œ</a>
                  </p>

                <p class="card-text text-muted mb-1">{{ show.genre }}</p>
                <p class="card-text text-muted">
                  <i class="bi bi-calendar"></i> {{ date }} &nbsp;
                  <i class="bi bi-clock"></i> {{ show.time }}
                </p>
                {% if show.sold_out %}
                  <button class="btn btn-secondary w-100" disabled>Sold Out</button>
                {% else %}
                  <form method="POST" action="/book">
                    <input type="hidden" name="venue" value="{{ show.venue }}">
                    <input type="hidden" name="date" value="{{ date }}">
                    <input type="hidden" name="show_name" value="{{ show.name }}">
                    <input type="hidden" name="time" value="{{ show.time }}">
                    <button style="background-color: rgb(138, 14, 14)" type="submit" class="btn btn-danger w-100">Book Now</button>
                  </form>
                {% endif %}
              </div>
            </div>
          </div>
        {% endfor %}
      </div>

  </div>
</div>
{% endblock %}
